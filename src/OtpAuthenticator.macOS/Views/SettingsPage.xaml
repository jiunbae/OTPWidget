<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:OtpAuthenticator.macOS.ViewModels"
             x:Class="OtpAuthenticator.macOS.Views.SettingsPage"
             x:DataType="viewmodels:SettingsViewModel"
             Title="{Binding Title}">

    <ScrollView Padding="20">
        <StackLayout Spacing="20">

            <!-- Status Message -->
            <Label Text="{Binding StatusMessage}"
                   TextColor="{StaticResource Primary}"
                   IsVisible="{Binding StatusMessage, Converter={StaticResource StringToBoolConverter}}"
                   Margin="0,0,0,10" />

            <!-- General Settings -->
            <Label Text="General" FontSize="20" FontAttributes="Bold" />

            <Frame Padding="15" BackgroundColor="{StaticResource Gray100}">
                <StackLayout Spacing="15">

                    <!-- Copy on Click -->
                    <Grid ColumnDefinitions="*,Auto">
                        <StackLayout Grid.Column="0">
                            <Label Text="Copy on Click" FontSize="16" />
                            <Label Text="Copy OTP code when clicked"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </StackLayout>
                        <Switch Grid.Column="1"
                                IsToggled="{Binding CopyOnClick}"
                                VerticalOptions="Center" />
                    </Grid>

                    <BoxView HeightRequest="1" Color="{StaticResource Gray300}" />

                    <!-- Auto Clear -->
                    <StackLayout>
                        <Label Text="Auto-clear Clipboard" FontSize="16" />
                        <Label Text="Clear clipboard after copying"
                               FontSize="12"
                               TextColor="{StaticResource Gray500}" />
                        <Picker ItemsSource="{Binding AutoClearOptions}"
                                SelectedItem="{Binding AutoClearSeconds}"
                                Margin="0,5,0,0" />
                    </StackLayout>

                    <BoxView HeightRequest="1" Color="{StaticResource Gray300}" />

                    <!-- Menu Bar -->
                    <Grid ColumnDefinitions="*,Auto">
                        <StackLayout Grid.Column="0">
                            <Label Text="Show in Menu Bar" FontSize="16" />
                            <Label Text="Display in macOS menu bar"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </StackLayout>
                        <Switch Grid.Column="1"
                                IsToggled="{Binding ShowInMenuBar}"
                                VerticalOptions="Center" />
                    </Grid>

                    <BoxView HeightRequest="1" Color="{StaticResource Gray300}" />

                    <!-- Language -->
                    <StackLayout>
                        <Label Text="Language" FontSize="16" />
                        <Picker ItemsSource="{Binding LanguageOptions}"
                                SelectedItem="{Binding SelectedLanguage}"
                                Margin="0,5,0,0" />
                    </StackLayout>

                </StackLayout>
            </Frame>

            <Button Text="Save Settings"
                    Command="{Binding SaveSettingsCommand}"
                    Margin="0,10,0,0" />

            <!-- Backup & Restore -->
            <Label Text="Backup &amp; Restore" FontSize="20" FontAttributes="Bold" Margin="0,20,0,0" />

            <Frame Padding="15" BackgroundColor="{StaticResource Gray100}">
                <StackLayout Spacing="15">

                    <Button Text="Export Backup"
                            Command="{Binding ExportBackupCommand}" />

                    <Button Text="Import Backup"
                            Command="{Binding ImportBackupCommand}"
                            BackgroundColor="{StaticResource Gray400}" />

                </StackLayout>
            </Frame>

            <!-- About -->
            <Label Text="About" FontSize="20" FontAttributes="Bold" Margin="0,20,0,0" />

            <Frame Padding="15" BackgroundColor="{StaticResource Gray100}">
                <StackLayout Spacing="10">
                    <Label Text="OTP Authenticator" FontSize="16" FontAttributes="Bold" />
                    <Label Text="Version 1.0.0" TextColor="{StaticResource Gray500}" />
                    <Label Text="A secure two-factor authentication app"
                           TextColor="{StaticResource Gray500}" />
                </StackLayout>
            </Frame>

        </StackLayout>
    </ScrollView>

</ContentPage>
